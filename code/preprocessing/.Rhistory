pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received == '')
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '')
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
# convert date/times into proper format
mutate(across(contains("date"), ~ dmy_hms(.)))
library(lubridate)
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
# convert date/times into proper format
mutate(across(contains("date"), ~ dmy_hms(.)))
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
mutate(
# convert date/times into proper format
across(contains("date"), ~ dmy_hms(.)),
# clean location information
location_clean = str_remove(police_event_information_location, ' (VERIFIED)', '')
)
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
mutate(
# convert date/times into proper format
across(contains("date"), ~ dmy_hms(.)),
# clean location information
location_clean = str_remove(police_event_information_location, pattern =  ' (VERIFIED)')
)
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
mutate(
# convert date/times into proper format
across(contains("date"), ~ dmy_hms(.)),
# clean location information
location_clean = str_replace(police_event_information_location, pattern =  ' (VERIFIED)', '')
)
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
mutate(
# convert date/times into proper format
across(contains("date"), ~ dmy_hms(.)),
# clean location information
location_clean = str_replace(police_event_information_location, pattern =  '(VERIFIED)', '')
)
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
mutate(
# convert date/times into proper format
across(contains("date"), ~ dmy_hms(.)),
# clean location information
location_clean = str_replace(police_event_information_location, pattern =  ' ?(VERIFIED)', '')
)
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
mutate(
# convert date/times into proper format
across(contains("date"), ~ dmy_hms(.)),
# clean location information
location_clean = str_replace(police_event_information_location, pattern =  ' ?\(VERIFIED\)', '')
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
mutate(
# convert date/times into proper format
across(contains("date"), ~ dmy_hms(.)),
# clean location information
location_clean = str_replace(police_event_information_location, "\\s*\\(VERIFIED\\)", "")
)
install.packages('tidygeocoder')
install.packages("tidygeocoder")
library(tidygeocoder)
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
mutate(
# convert date/times into proper format
across(contains("date"), ~ dmy_hms(.)),
# clean location information
location_clean = str_replace(police_event_information_location, "\\s*\\(VERIFIED\\)", "")) %>%
geocode(location_clean, method = 'osm', lat = latitude, long = longitude)
Sys.setenv(GOOGLEGEOCODE_API_KEY = "AIzaSyAMAw5YQDnYd1Bhd-dWnUqxC2AfCye2srQ")
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
mutate(
# convert date/times into proper format
across(contains("date"), ~ dmy_hms(.)),
# clean location information
location_clean = str_replace(police_event_information_location, "\\s*\\(VERIFIED\\)", "")) %>%
geocode(location_clean, method = 'google', lat = latitude, long = longitude)
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
mutate(
# convert date/times into proper format
across(contains("date"), ~ dmy_hms(.)),
# clean location information
location_clean = str_replace(police_event_information_location, "\\s*\\(VERIFIED\\)", "")) %>%
geocode(location_clean, method = 'google')
?geocode
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
mutate(
# convert date/times into proper format
across(contains("date"), ~ dmy_hms(.)),
# clean location information
location_clean = str_replace(police_event_information_location, "\\s*\\(VERIFIED\\)", "")) %>%
geocode(address = location_clean, method = 'google')
Sys.getenv("GOOGLEGEOCODE_API_KEY")
Sys.setenv(GOOGLEGEOCODE_API_KEY = "AIzaSyBdbtRTfkahvL18x4X3nnBe_gPzJhSDJHg")
pr_clean_short <- pr[1:10,] %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
mutate(
# convert date/times into proper format
across(contains("date"), ~ dmy_hms(.)),
# clean location information
location_clean = str_replace(police_event_information_location, "\\s*\\(VERIFIED\\)", "")) %>%
geocode(address = location_clean, method = 'google')
pr_clean_short <- pr %>%
janitor::clean_names() %>%
filter(police_event_information_date_time_received != '') %>%
mutate(
# convert date/times into proper format
across(contains("date"), ~ dmy_hms(.)),
# clean location information
location_clean = str_replace(police_event_information_location, "\\s*\\(VERIFIED\\)", "")) %>%
geocode(address = location_clean, method = 'google')
extract_events <- function(txt) {
# extract timestamps
times <- str_extract_all(txt, "\\b\\d{2}:\\d{2}:\\d{2}\\b")[[1]]
# split text around timestamps
pieces <- str_split(txt, "\\b\\d{2}:\\d{2}:\\d{2}\\b")[[1]]
# clean whitespace
pieces <- str_squish(pieces)
# return tibble
tibble(
text_before_time = pieces,
event_time_stamp = times
)
}
pr_clean_long_events <- pr_clean_short %>%
rowwise() %>%
mutate(events = list(extract_events(event_log))) %>%
ungroup() %>%
unnest(events)
extract_events <- function(txt) {
# extract timestamps
times <- str_extract_all(txt, "\\b\\d{2}:\\d{2}:\\d{2}\\b")[[1]]
# split text around timestamps
pieces <- str_split(txt, "\\b\\d{2}:\\d{2}:\\d{2}\\b")[[1]]
# clean whitespace
pieces <- str_squish(pieces)
# return tibble
tibble(
text_before_time = pieces[1:length(times)],
event_time_stamp = times
)
}
pr_clean_long_events <- pr_clean_short %>%
rowwise() %>%
mutate(events = list(extract_events(event_log))) %>%
ungroup() %>%
unnest(events)
View(pr_clean_long_events)
pr_clean_long_events$event
mydf <- pr_clean_long_events %>% filter(event  = '#2505072162')
mydf <- pr_clean_long_events %>% filter(event == '#2505072162')
View(mydf)
write.csv(pr_clean_short, paste0(INTERMEDIARY_FP, 'pr_short.csv'))
write.csv(pr_clean_long_events, paste0(INTERMEDIARY_FP, 'pr_long_events.csv'))
write.csv(pr_clean_short, paste0(INTERMEDIARY_FP, 'pr_short.csv'))
write.csv(pr_clean_long_events, paste0(INTERMEDIARY_FP, 'pr_long_events.csv'))
pr_clean_short %>%
dplyr::select(police_event_information_date_time_received, long, lat) %>%
write.csv(paste0(INTERMEDIARY_FP, 'pr_gmaps.csv'))
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
INPUT_FP <- '../../data/input/Memphis Affidavits/'
OUTPUT_FP <- '../../data/input/Memphis Affidavits/'
url <- "https://cjs.shelbycountytn.gov/CJS/DocumentViewer/PreviewImage?Page=0&DocId=13024350&LocationId=3008&docTypeId=153&isVersionId=False"
download.file(url, destfile = paste0(OUTPUT_FP, 'test.png'), mode = "wb")
url <- 'https://cjs.shelbycountytn.gov/CJS/DocumentViewer/PreviewImage?Page=0&DocId=13024350&LocationId=3008&docTypeId=153&isVersionId=False'
download.file(url, destfile = paste0(OUTPUT_FP, 'test.png'), mode = "wb")
library(httr2)
resp <- request(url) %>%
req_headers(
"Referer" = referer_url,
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36") %>%
req_cookies(cookies) %>%
req_perform()
library(httr2)
library(httr2)
resp <- request(url) %>%
req_headers(
"Referer" = referer_url,
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36") %>%
req_cookies(cookies) %>%
req_perform()
?req_cookie_preserve
resp <- request(url) %>%
req_headers(
"Referer" = referer_url,
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36") %>%
req_cookie(cookies) %>%
req_perform()
resp <- request(url) %>%
req_headers(
"Referer" = referer_url,
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36") %>%
req_cookies(.list = cookies) %>%
req_perform()
cookies <- c(
"ASP.NET_SessionId" = "2tm0n0t0kefs40a3i2eetxc5"
)
resp <- request(url) %>%
req_headers(
"Referer" = referer_url,
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36") %>%
set_cookies(.cookies = cookies) %>%
req_perform()
resp <- request(url) %>%
req_headers(
"Referer" = referer_url,
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36") %>%
req_cookies_set(.cookies = cookies) %>%
req_perform()
?req_cookie_preserve
resp <- request(url) %>%
req_headers(
"Referer" = referer_url,
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36") %>%
req_template(.cookies = cookies) %>%
req_perform()
?req_headers
resp <- request(url) %>%
req_headers(
"Referer" = referer_url,
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36") %>%
req_template(.cookies = cookies) %>%
req_dry_run()
cookies <- c(
"ASP.NET_SessionId" = "2tm0n0t0kefs40a3i2eetxc5"
)
url <- 'https://cjs.shelbycountytn.gov/CJS/DocumentViewer/PreviewImage?Page=0&DocId=13024350&LocationId=3008&docTypeId=153&isVersionId=False'
resp <- request(url) %>%
req_headers(
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36") %>%
req_template(.cookies = cookies) %>%
req_dry_run()
resp <- request(url) %>%
req_headers(
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36") %>%
req_cookies_set("ASP.NET_SessionId" = "2tm0n0t0kefs40a3i2eetxc5") %>%
req_dry_run()
install.packages('httr2')
install.packages("httr2")
library(httr2)
resp <- request(url) %>%
req_headers(
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36") %>%
req_cookies_set("ASP.NET_SessionId" = "2tm0n0t0kefs40a3i2eetxc5") %>%
req_dry_run()
resp <- request(url) %>%
req_headers(
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36") %>%
req_cookies_set("ASP.NET_SessionId" = "2tm0n0t0kefs40a3i2eetxc5") %>%
req_dry_run()
resp <- request(url) %>%
req_headers(
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36") %>%
req_dry_run()
resp <- request(url) %>%
req_headers(
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36",
"CookiE" == "ASP.NET_SessionId=2tm0n0t0kefs40a3i2eetxc5") %>%
req_dry_run()
resp <- request(url) %>%
req_headers(
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36",
"CookiE" = "ASP.NET_SessionId=2tm0n0t0kefs40a3i2eetxc5") %>%
req_dry_run()
resp <- request(url) %>%
req_headers(
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36",
"CookiE" = "ASP.NET_SessionId=2tm0n0t0kefs40a3i2eetxc5") %>%
req_dry_run()
resp <- request(url) %>%
req_headers(
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36",
"Cookie" = "ASP.NET_SessionId=2tm0n0t0kefs40a3i2eetxc5") %>%
req_dry_run()
resp <- request(url) %>%
req_headers(
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36",
"Cookie" = "ASP.NET_SessionId=2tm0n0t0kefs40a3i2eetxc5") %>%
req_perform()
writeBin(resp_body_raw(resp), paste0(OUTPUT_FP, 'test.png'))
session_id <- UUIDgenerate()
install.packages('uuid')
library(uuid)
session_id <- UUIDgenerate()
print(session_id)
resp <- request(url) %>%
req_headers(
"User-Agent" = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36",
"Cookie" = paste0("ASP.NET_SessionId=", session_id)) %>%
req_perform()
writeBin(resp_body_raw(resp), paste0(OUTPUT_FP, 'test.png'))
scrape_single_doc <- function(docid){
session_id <- UUIDgenerate()
user_agent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
url = paste0('https://cjs.shelbycountytn.gov/CJS/DocumentViewer/PreviewImage?Page=0&DocId=',
docid,
'&LocationId=3008&docTypeId=153&isVersionId=False')
resp <- request(url) %>%
req_headers(
"User-Agent" = user_agent,
"Cookie" = paste0("ASP.NET_SessionId=", session_id)) %>%
req_perform()
writeBin(resp_body_raw(resp), paste0(OUTPUT_FP, docid, '.png'))
}
scrape_single_doc <- function(docid){
session_id <- UUIDgenerate()
user_agent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
url = paste0('https://cjs.shelbycountytn.gov/CJS/DocumentViewer/PreviewImage?Page=0&DocId=',
docid,
'&LocationId=3008&docTypeId=153&isVersionId=False')
resp <- request(url) %>%
req_headers(
"User-Agent" = user_agent,
"Cookie" = paste0("ASP.NET_SessionId=", session_id)) %>%
req_perform()
writeBin(resp_body_raw(resp), paste0(OUTPUT_FP, docid, '.png'))
}
scrape_single_doc('13024350')
sample(1:10)
sample(1:10, n = 1)
sample(1:10, 1)
sample(1:10, 1)
sample(1:10, 1)
Sys.sleep(3)
scrape_single_doc <- function(docid){
session_id <- UUIDgenerate()
user_agent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
url = paste0('https://cjs.shelbycountytn.gov/CJS/DocumentViewer/PreviewImage?Page=0&DocId=',
docid,
'&LocationId=3008&docTypeId=153&isVersionId=False')
resp <- request(url) %>%
req_headers(
"User-Agent" = user_agent,
"Cookie" = paste0("ASP.NET_SessionId=", session_id)) %>%
req_perform()
print(resp)
writeBin(resp_body_raw(resp), paste0(OUTPUT_FP, docid, '.png'))
Sys.sleep(sample(1:10, 1))
}
scrape_single_doc <- function(docid){
session_id <- UUIDgenerate()
user_agent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
url = paste0('https://cjs.shelbycountytn.gov/CJS/DocumentViewer/PreviewImage?Page=0&DocId=',
docid,
'&LocationId=3008&docTypeId=153&isVersionId=False')
resp <- request(url) %>%
req_headers(
"User-Agent" = user_agent,
"Cookie" = paste0("ASP.NET_SessionId=", session_id)) %>%
req_perform()
print(resp)
# check that the output format is correct
writeBin(resp_body_raw(resp), paste0(OUTPUT_FP, docid, '.png'))
Sys.sleep(sample(1:10, 1))
}
scrape_single_doc <- function(docid){
session_id <- UUIDgenerate()
user_agent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
url = paste0('https://cjs.shelbycountytn.gov/CJS/DocumentViewer/PreviewImage?Page=0&DocId=',
docid,
'&LocationId=3008&docTypeId=153&isVersionId=False')
resp <- request(url) %>%
req_headers(
"User-Agent" = user_agent,
"Cookie" = paste0("ASP.NET_SessionId=", session_id)) %>%
req_perform()
print(resp)
# check that the output format is correct
writeBin(resp_body_raw(resp), paste0(OUTPUT_FP, docid, '.png'))
#Sys.sleep(sample(1:10, 1))
}
scrape_single_doc('13024350')
scrape_single_doc('13024359')
scrape_single_doc('13024361')
session_id <- UUIDgenerate()
user_agent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
session_id <- UUIDgenerate()
user_agent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
url = paste0('https://cjs.shelbycountytn.gov/CJS/DocumentViewer/PreviewImage?Page=0&DocId=',
'13024361',
'&LocationId=3008&docTypeId=153&isVersionId=False')
resp <- request(url) %>%
req_headers(
"User-Agent" = user_agent,
"Cookie" = paste0("ASP.NET_SessionId=", session_id)) %>%
req_perform()
View(resp)
resp$headers$`content-type`
url = paste0('https://cjs.shelbycountytn.gov/CJS/DocumentViewer/PreviewImage?Page=0&DocId=',
'13024351',
'&LocationId=3008&docTypeId=153&isVersionId=False')
resp <- request(url) %>%
req_headers(
"User-Agent" = user_agent,
"Cookie" = paste0("ASP.NET_SessionId=", session_id)) %>%
req_perform()
resp$headers$`content-type`
library(furrr)
docid_vec <- as.character(13024351:13024361)
docid_vec <- as.character(13024351:13024361)
plan(multisession, workers = 4)
future_map_dfr(docid_vec, function(x) scrape_single_doc(x), .progress = TRUE)
scrape_single_doc <- function(docid){
session_id <- UUIDgenerate()
user_agent = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
url = paste0('https://cjs.shelbycountytn.gov/CJS/DocumentViewer/PreviewImage?Page=0&DocId=',
docid,
'&LocationId=3008&docTypeId=153&isVersionId=False')
resp <- request(url) %>%
req_headers(
"User-Agent" = user_agent,
"Cookie" = paste0("ASP.NET_SessionId=", session_id)) %>%
req_perform()
# check that the output format is correct
if(resp$headers$`content-type` != "image/png"){
return_df <- data.frame(
docid = docid,
content_type = resp$headers$`content-type`,
affidavit_hosted = FALSE,
filepath = NA
)
return(return_df)
}
fp <- paste0(OUTPUT_FP, docid, '.png')
writeBin(resp_body_raw(resp), fp)
Sys.sleep(sample(1:10, 1))
return_df <- data.frame(
docid = docid,
content_type = resp$headers$`content-type`,
affidavit_hosted = TRUE,
filepath = fp
)
}
docid_vec <- as.character(13024351:13024361)
plan(multisession, workers = 4)
status_df <- future_map_dfr(docid_vec, function(x) scrape_single_doc(x), .progress = TRUE)
status_df <- future_map_dfr(docid_vec, function(x) scrape_single_doc(x), .progress = TRUE)
?future_map_dfr
View(status_df)
docid_vec <- as.character(13359215:13536791)
docid_vec <- as.character(13359215:13536838)
plan(multisession, workers = 4)
status_df <- future_map_dfr(sample(docid_vec, n = 100), function(x) scrape_single_doc(x), .progress = TRUE, furrr_options(seed = T))
sample(docid_vec)
sample(docid_vec, 100)
set.seed(123)
docid_vec_sample <- sample(docid_vec, 100)
plan(multisession, workers = 4)
status_df <- future_map_dfr(docid_vec_sample, function(x) scrape_single_doc(x), .progress = TRUE, furrr_options(seed = T))
status_df <- future_map_dfr(docid_vec_sample, function(x) scrape_single_doc(x),
.progress = TRUE, furrr_options(list(seed = T)))
status_df <- future_map_dfr(docid_vec_sample, function(x) scrape_single_doc(x),
.progress = TRUE,
.options = furrr_options(seed = TRUE)))
status_df <- future_map_dfr(docid_vec_sample, function(x) scrape_single_doc(x),
.progress = TRUE,
.options = furrr_options(seed = TRUE))
170000/100
1700/60
View(status_df)
sum(!is.na(status_df$filepath))
docid_vec <- as.character(13359215:13365589)
docid_vec <- as.character(13359215:13359843)
docid_vec <- as.character(13359215:13359843)
set.seed(123)
docid_vec_sample <- sample(docid_vec, 100)
plan(multisession, workers = 4)
plan(multisession, workers = 6)
status_df <- future_map_dfr(docid_vec_sample, function(x) scrape_single_doc(x),
.progress = TRUE,
.options = furrr_options(seed = TRUE))
status_df <- future_map_dfr(docid_vec, function(x) scrape_single_doc(x),
.progress = TRUE,
.options = furrr_options(seed = TRUE))
View(status_df)
mean(!is.na(status_df$affidavit_hosted))
mean(status_df$affidavit_hosted)
170000/600
170000/600*6
(170000/600*6)/60
170000/600*115
write.csv(status_df, paste0(OUTPUT_FP, 'status.csv'))
